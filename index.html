<!DOCTYPE html>
<html>
  <head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
body {font-family: Arial;}

/* Style the tab */
.tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
    background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
    background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
}
</style>
  </head>
  <body>
  <center>
  
  <!-- Main Tab Selection Section -->
  <div class="tab">
  <button class="tablinks" onclick="openEvent(event, 'Attendance')" id="defaultOpen">Attendance</button>
  <button class="tablinks" onclick="openEvent(event, 'Restroom')">Restroom</button>
  </div>
  
  <!-- Attendance Tab Section -->
  <div id="Attendance" class="tabcontent">
  <h3>Attendance</h3>
  <form id="checkInForm">
      <p><em>Select your name from the list</em></p>
      
      <select id="select">
      <option disabled selected value> -- select -- </option>
      <? var options = getStudents()
        for (var i = 0; i < options.length; i++) { ?>
          <option><?= options[i] ?></option>
       <? } ?>
      </select>
      <input id="submitBtn" type="button" onclick="onSubmit()" value="Check-In">
    </form>
    
    <br>
    <div id="student_status"></div>
    </div>
    
      <!-- Restroom Tab Section -->
    <div id="Restroom" class="tabcontent">
  <h3>Restroom</h3>
<form id="restroomForm">
      <p><em>Select your name from the list</em></p>
      
      <select id="restroomSelect">
      <option disabled selected value> -- select -- </option>
      <? var options = getStudents()
        for (var i = 0; i < options.length; i++) { ?>
          <option><?= options[i] ?></option>
       <? } ?>
      </select>
      <input id="restroomBtn" type="button" onclick="restroomSubmit()" value="Log">
    </form>
    
       <br>
       <div id="restroom_status"></div>
</div>
    
    </center>
     <script>
          
          function onSubmit(){
          document.getElementById("submitBtn").disabled = true;
          
          var name = document.getElementById("select").value;
            google.script.run.withSuccessHandler(onSuccess)
          .checkIn(name);
          }
          
          function onSuccess(statusMsg){
          var div = document.getElementById("student_status");
          div.innerHTML = statusMsg;
          document.getElementById("checkInForm").reset();
          document.getElementById("submitBtn").disabled = false;
          }
          
          function restroomSubmit(){
          document.getElementById("restroomBtn").disabled = true;
          
          var name = document.getElementById("restroomSelect").value;
            google.script.run.withSuccessHandler(restroomSuccess)
          .restroomLog(name);
          }
          
          function restroomSuccess(statusMsg){
          var div = document.getElementById("restroom_status");
          div.innerHTML = statusMsg;
          document.getElementById("restroomForm").reset();
          document.getElementById("restroomBtn").disabled = false;
          }
          
          /* Code below for the tab selections */
          
          function openEvent(evt, action) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          
          document.getElementById(action).style.display = "block";
          evt.currentTarget.className += " active";
}

  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();
          
    </script>
  </body>
</html>